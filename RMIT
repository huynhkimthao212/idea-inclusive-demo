<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IDEA Inclusive Language Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 32px 16px;
      background: #f5f5f7;
      display: flex;
      justify-content: center;
    }

    .container {
      width: 100%;
      max-width: 720px;
      background: #ffffff;
      border-radius: 16px;
      padding: 24px 24px 28px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.10);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 22px;
    }

    .subtitle {
      margin: 0 0 20px;
      color: #6b7280;
      font-size: 14px;
    }

    label {
      font-weight: 600;
      font-size: 14px;
      display: block;
      margin-bottom: 8px;
    }

    textarea {
      width: 100%;
      min-height: 140px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      padding: 12px 14px;
      font-size: 14px;
      resize: vertical;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s;
    }

    textarea:focus {
      border-color: #ef4444;
      box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.25);
    }

    .hint {
      margin-top: 6px;
      font-size: 12px;
      color: #9ca3af;
    }

    .results {
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
    }

    .results-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      border: 1px solid #fee2e2;
      background: #fef2f2;
      padding: 6px 10px;
      font-size: 12px;
      margin: 4px 4px 0 0;
      color: #b91c1c;
    }

    .pill span.word {
      font-weight: 600;
    }

    .pill span.arrow {
      font-size: 11px;
      color: #9ca3af;
    }

    .empty {
      font-size: 13px;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>IDEA Inclusive Language Demo</h1>
    <p class="subtitle">
      Type your text below. If you use a non-inclusive word (for example
      <strong>“blind”</strong>), we’ll suggest a more inclusive alternative
      (for example <strong>“visually impaired”</strong>).
    </p>

    <label for="text-input">Your text</label>
    <textarea id="text-input"
      placeholder="Try typing a sentence like: &quot;We want to help blind students.&quot;">
    </textarea>
    <div class="hint">
      Try: <code>blind</code>, <code>crazy</code>, <code>normal people</code>, <code>handicapped</code>...
    </div>

    <div class="results" id="results">
      <div class="results-title">Suggestions</div>
      <div class="empty">No non-inclusive words detected yet.</div>
    </div>
  </div>

  <script>
    // Simple dictionary of non-inclusive terms → suggested alternatives
    const dictionary = {
      "blind": "visually impaired person / person who is blind",
      "deaf": "person who is deaf / hard of hearing",
      "crazy": "overwhelming / intense / unbelievable",
      "insane": "extreme / unreasonable",
      "normal people": "non-disabled people",
      "handicapped": "person with a disability",
      "slow learner": "student who needs learning support",
      "old people": "older adults / elderly people",
      "third world countries": "low- and middle-income countries"
    };

    const textarea = document.getElementById("text-input");
    const resultsEl = document.getElementById("results");

    textarea.addEventListener("input", handleInput);

    function handleInput() {
      const text = textarea.value.toLowerCase();
      const matches = [];

      Object.keys(dictionary).forEach(term => {
        const regex = new RegExp("\\b" + escapeRegex(term) + "\\b", "gi");
        if (regex.test(text)) {
          matches.push({ term, suggestion: dictionary[term] });
        }
      });

      renderResults(matches);
    }

    function renderResults(matches) {
      // Clear everything after the title
      const old = Array.from(resultsEl.children).slice(1);
      old.forEach(el => el.remove());

      if (!matches.length) {
        const empty = document.createElement("div");
        empty.className = "empty";
        empty.textContent = "No non-inclusive words detected yet.";
        resultsEl.appendChild(empty);
        return;
      }

      matches.forEach(item => {
        const pill = document.createElement("div");
        pill.className = "pill";
        const word = document.createElement("span");
        word.className = "word";
        word.textContent = item.term;

        const arrow = document.createElement("span");
        arrow.className = "arrow";
        arrow.textContent = "→";

        const suggestion = document.createElement("span");
        suggestion.textContent = item.suggestion;

        pill.appendChild(word);
        pill.appendChild(arrow);
        pill.appendChild(suggestion);
        resultsEl.appendChild(pill);
      });
    }

    function escapeRegex(str) {
      return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
    }

    // Gọi 1 lần để hiển thị trạng thái ban đầu
    handleInput();
  </script>
</body>
</html>
